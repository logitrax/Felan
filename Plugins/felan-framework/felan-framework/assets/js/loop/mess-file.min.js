(function(s){"use strict";var f=felan_mess_file_vars.ajax_url,t=felan_mess_file_vars.title,i=felan_mess_file_vars.file_type,n=felan_mess_file_vars.max_file_size,r=felan_mess_file_vars.file_url,o=felan_mess_file_vars.file_upload_nonce;s(document).ready(function(){var e=function(){var l=new plupload.Uploader({browse_button:"felan_select_file",file_data_name:"felan_thumbnail_upload_file",drop_element:"felan_select_file",container:"felan_file_container",url:r,filters:{mime_types:[{title:t,extensions:i}],max_file_size:n,prevent_duplicates:true}});l.init();l.bind("UploadProgress",function(e,a){s("#felan_select_file i").removeClass("far fa-arrow-from-bottom large");s("#felan_select_file i").addClass("fal fa-spinner fa-spin large")});l.bind("FilesAdded",function(e,a){var t=1;e.refresh();l.start()});l.bind("Error",function(e,a){alert("Error #"+a.code+": "+a.message)});l.bind("FileUploaded",function(e,a,t){document.getElementById("felan_drop_file").innerHTML='<button type="button" class="tooltip" id="felan_select_file" data-title="Upload File"><i class="far fa-file-upload"></i></button>';var l=s.parseJSON(t.response);if(l.success){s(".file_url").val(l.url);s("#felan_drop_file").attr("data-attachment-id",l.attachment_id);s("#felan_drop_file .cv-icon-delete").remove();var i='<button><i class="far fa-arrow-from-bottom large"></i><span>'+l.title+"</span>"+'<a class="icon cv-icon-delete" data-attachment-id="'+l.attachment_id+'" href="#" ><i class="far fa-trash-alt large"></i></a></button>';s("#felan_select_file i").addClass("far fa-arrow-from-bottom large");s("#felan_mess_file_view").html(i)}})};e();var a=function(n){s("body").on("click",".cv-icon-delete",function(e){e.preventDefault();var a=s(this),t=a,l=a.data("jobs-id"),i=a.data("attachment-id");t.html('<i class="fal fa-spinner fa-spin large"></i>');s.ajax({type:"post",url:f,dataType:"json",data:{action:"felan_thumbnail_remove_ajax",jobs_id:l,attachment_id:i,type:n,removeNonce:o},beforeSend:function(){t.html('<i class="fal fa-spinner fa-spin large"></i>')},success:function(e){if(e.success){s(".felan_file_type").show()}s("#felan_drop_file").attr("data-attachment-id","");t.remove();s("#felan_mess_file_view").html("")},error:function(){t.html('<i class="far fa-trash-alt large"></i>')}})})};a("thumb")})})(jQuery);