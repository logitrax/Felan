var EMPLOYER_WALLET=EMPLOYER_WALLET||{};(function(l){"use strict";var o=felan_my_wallet_vars.ajax_url,f=felan_my_wallet_vars.not_wallet,d=l(".felan-employer-withdraw #tab-withdrawals"),i=l("#form-employer-withdraw");EMPLOYER_WALLET={init:function(){this.submit_withdraw();this.my_wallet()},submit_withdraw:function(){l("body").on("click","#btn-submit-withdraw",function(a){a.preventDefault();var t=l(this),n=i.find('select[name="withdraw_payment"]').val(),e=i.find('input[name="withdraw_price"]').val();l.ajax({type:"POST",url:o,dataType:"json",data:{action:"felan_employer_submit_withdraw",withdraw_payment:n,withdraw_price:e},beforeSend:function(){t.find(".btn-loader").html('<i class="fal fa-spinner fa-spin"></i>')},success:function(a){if(a.success==true){location.reload();i.find(".felan-message-error").addClass("true")}i.find(".felan-message-error").text(a.message);t.find(".btn-loader").html('<i class="fas fa-arrow-to-bottom"></i>')}})})},my_wallet:function(){d.find(".select-pagination").change(function(){var a="";l(".select-pagination option:selected").each(function(){a+=l(this).val()+" "});l(this).attr("value")}).trigger("change");d.find("select.search-control").on("change",function(){l(".felan-pagination").find('input[name="paged"]').val(1);e()});d.find("input.search-control").on("input",function(){l(".felan-pagination").find('input[name="paged"]').val(1);e()});function a(n,e){var i=0;return function(){var a=this,t=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(a,t)},e||0)}}d.find("input.service-search-control").keyup(a(function(){l(".felan-pagination").find('input[name="paged"]').val(1);e()},1e3));l("body").on("click","#tab-withdrawals .felan-pagination a.page-numbers",function(a){a.preventDefault();l("#tab-withdrawals .felan-pagination li .page-numbers").removeClass("current");l(this).addClass("current");var t=l(this).text();var n=1;if(d.find(".felan-pagination").find('input[name="paged"]').val()){n=l(".felan-pagination").find('input[name="paged"]').val()}if(l(this).hasClass("next")){t=parseInt(n)+1}if(l(this).hasClass("prev")){t=parseInt(n)-1}d.find(".felan-pagination").find('input[name="paged"]').val(t);e()});var t=1;d.find(".select-pagination").attr("data-value",t);function e(){var s=1;var a=d.find("#my-wallet").height();var t=d.find('select[name="wallet_status"]').val(),n=d.find('select[name="wallet_method"]').val(),e=d.find('select[name="item_amount"]').val(),i=d.find('select[name="wallet_sort_by"]').val();s=d.find(".felan-pagination").find('input[name="paged"]').val();l.ajax({dataType:"json",url:o,data:{action:"felan_employer_wallet_dashboard",item_amount:e,paged:s,wallet_status:t,wallet_method:n,wallet_sort_by:i},beforeSend:function(){d.find(".felan-loading-effect").addClass("loading").fadeIn();d.find("#my-wallet").height(a)},success:function(a){if(a.success===true){var t=d.find(".items-pagination"),n=t.find('select[name="item_amount"] option:selected').val(),e=a.total_post,i=n*s+1-n,l=n*s;if(e<i){i=n*(s-1)+1}if(e<l){l=e}d.find(".num-first").text(i);d.find(".num-last").text(l);if(e>n){t.closest(".pagination-dashboard").show();t.find(".num-total").html(a.total_post)}else{t.closest(".pagination-dashboard").hide()}d.find(".pagination").html(a.pagination);d.find("#my-wallet tbody").fadeOut("fast",function(){d.find("#my-wallet tbody").html(a.wallet_html);d.find("#my-wallet tbody").fadeIn(300)});d.find("#my-wallet").css("height","auto")}else{d.find("#my-wallet tbody").html('<span class="not-service">'+f+"</span>")}d.find(".felan-loading-effect").removeClass("loading").fadeOut()}})}}};l(document).ready(function(){EMPLOYER_WALLET.init()})})(jQuery);